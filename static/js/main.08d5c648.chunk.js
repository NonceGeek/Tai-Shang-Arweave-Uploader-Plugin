(this["webpackJsonptai-shang-arweave-uploader-plugin"]=this["webpackJsonptai-shang-arweave-uploader-plugin"]||[]).push([[0],{435:function(e,t,n){"use strict";(function(e){var a=n(0),c=n.n(a),i=n(436),o=n(71),s=n.n(o),r=n(38),l=n(264),d=n(30),u=n(75),h=n(105),j=n(262),b=n(263),p=n(271),v=n(452),x=n(79),w=n(194),g=n(10);t.a=function(){const t="Select a Currency",n="Select a Provider",[o,f]=c.a.useState(t),[O,y]=c.a.useState(),[C,m]=c.a.useState(n),[S,k]=c.a.useState(),[I,T]=c.a.useState(),[_,F]=c.a.useState(),[B,U]=c.a.useState(),[A,M]=c.a.useState("https://node1.bundlr.network"),[N,W]=c.a.useState(),[L,P]=c.a.useState(),[E,J]=c.a.useState(),z=Object(l.a)(),D=c.a.useRef(),[G,R]=c.a.useState("image/png"),[q,H]=c.a.useState("application/elixir"),[V,K]=Object(a.useState)(""),[Q,X]=c.a.useState("just a piece of word"),[Y,Z]=c.a.useState(),[$,ee]=Object(a.useState)(""),te=async()=>{clearInterval(D.current),k(void 0),T(void 0),F(void 0),U(void 0),J(void 0),y(void 0),f(t),m(n)},ne=async t=>{let n=t.target.files,a=new FileReader;n&&n.length>0&&(a.onload=function(){a.result&&T(e.from(a.result))},a.readAsArrayBuffer(n[0]))},ae=async e=>{E&&await te();const t=new x.providers.Web3Provider(e);return await t._ready(),t},ce={MetaMask:async e=>{var t,n;if(null===(t=window)||void 0===t||null===(n=t.ethereum)||void 0===n||!n.isMetaMask)return;await window.ethereum.enable();const a=await ae(window.ethereum),c="0x".concat(e.chainId.toString(16));try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:c}]})}catch(i){4902===i.code&&await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:c,rpcUrls:e.rpcUrls,chainName:e.chainName}]})}return a},WalletConnect:async e=>await ae(await new v.a(e).enable())},ie={matic:{providers:["MetaMask","WalletConnect"],opts:{chainId:137,chainName:"Polygon Mainnet",rpcUrls:["https://polygon-rpc.com"]}}},oe=e=>e.charAt(0).toUpperCase()+e.substring(1).toLowerCase(),se=e=>{const t=new s.a(e).multipliedBy(B.currencyConfig.base[1]);if(!t.isLessThan(1))return t;z({status:"error",title:"Value too small!"})};return Object(g.jsxs)(d.e,{mt:10,children:[Object(g.jsxs)(d.c,{children:[" ",Object(g.jsxs)(u.a,{children:[Object(g.jsx)(u.b,{as:r.a,rightIcon:Object(g.jsx)(p.a,{}),children:oe(o)}),Object(g.jsx)(u.d,{children:Object.keys(ie).map((e=>Object(g.jsx)(u.c,{onClick:()=>{te(),f(e)},children:oe(e)},e)))})]}),Object(g.jsxs)(u.a,{children:[Object(g.jsx)(u.b,{disabled:o===t,as:r.a,rightIcon:Object(g.jsx)(p.a,{}),children:C}),Object(g.jsx)(u.d,{children:Object.keys(ce).map((e=>ie[o]&&-1!==ie[o].providers.indexOf(e)?Object(g.jsx)(u.c,{onClick:()=>m(e),children:e},e):void 0))})]}),Object(g.jsx)(r.a,{w:300,colorScheme:"green",disabled:!(C!==n&&o!==t&&A.length>8),onClick:async()=>await(async()=>{if(D.current&&clearInterval(D.current),E)return J(void 0),U(void 0),void y(void 0);const e=C,t=o,n=ce[e],a=ie[t];console.log("loading: ".concat(e," for ").concat(t));const c=await n(a.opts).catch((t=>{z({status:"error",title:"Failed to load provider ".concat(e),duration:1e4}),console.log(t)}));J(c)})(),children:E?"Disconnect":"Connect"})]}),Object(g.jsxs)(d.d,{children:["Connected Account: ",null!==O&&void 0!==O?O:"None"]}),Object(g.jsxs)(d.c,{w:1e3,children:[Object(g.jsx)(r.a,{w:300,colorScheme:"green",disabled:!E,onClick:async()=>await(async()=>{const e=new i.WebBundlr(A,o,E);try{await e.utils.getBundlerAddress(o)}catch{return void z({status:"error",title:"Failed to connect to bundlr ".concat(A),duration:1e4})}try{await e.ready()}catch(t){console.log(t)}e.address||console.log("something went wrong"),z({status:"success",title:"Connected to ".concat(A)}),y(null===e||void 0===e?void 0:e.address),U(e)})(),children:"Connect to Bundlr"}),Object(g.jsx)(h.a,{value:A,onChange:e=>{M(e.target.value)},placeholder:"Bundler Address"}),B&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(r.a,{w:300,onClick:async()=>{O&&B.getBalance(O).then((e=>{k(e.toString())})),await(async()=>{D&&clearInterval(D.current),D.current=window.setInterval((async()=>{null===B||void 0===B||B.getLoadedBalance().then((e=>{k(e.toString())})).catch((e=>clearInterval(D.current)))}),5e3)})()},children:"Get Balance"}),S&&Object(g.jsx)(j.a,{label:"(".concat(S," ").concat(B.currencyConfig.base[0],")"),children:Object(g.jsxs)(d.d,{style:{whiteSpace:"nowrap"},children:[B.utils.unitConverter(S).toFixed(4,2).toString()," ",B.currencyConfig.ticker.toLowerCase()]})})]})]}),B&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(d.c,{w:1e3,children:[Object(g.jsx)(r.a,{w:300,onClick:async()=>{if(B&&N){z({status:"info",title:"Funding...",duration:15e3});const e=se(N);if(!e)return;await B.fund(e).then((e=>{z({status:"success",title:"Funded ".concat(null===e||void 0===e?void 0:e.target),description:" tx ID : ".concat(null===e||void 0===e?void 0:e.id),duration:1e4})})).catch((e=>{var t;z({status:"error",title:"Failed to fund - ".concat((null===(t=e.data)||void 0===t?void 0:t.message)||e.message)})}))}},children:"Fund"}),Object(g.jsx)(h.a,{placeholder:"".concat(oe(o)," Amount"),value:N,onChange:e=>{W(e.target.value)}}),Object(g.jsx)(r.a,{w:300,onClick:async()=>{if(B&&L){z({status:"info",title:"Withdrawing..",duration:15e3});const e=se(L);if(!e)return;await B.withdrawBalance(e).then((e=>{var t;z({status:"success",title:"Withdrawal successful - ".concat(null===(t=e.data)||void 0===t?void 0:t.tx_id),duration:5e3})})).catch((e=>{z({status:"error",title:"Withdrawal Unsuccessful!",description:e.message,duration:5e3})}))}},children:"Withdraw"}),Object(g.jsx)(h.a,{placeholder:"".concat(oe(o)," Amount"),value:L,onChange:e=>{P(e.target.value)}})]}),Object(g.jsx)(d.b,{w:1e3}),Object(g.jsx)(d.d,{fontSize:"xl",children:Object(g.jsx)("b",{children:"Choice 0x01. Upload File"})}),Object(g.jsxs)(d.c,{children:[Object(g.jsx)(d.d,{children:'Type(default is "image/png"):'}),Object(g.jsx)(h.a,{onChange:e=>R(e.target.value),placeholder:"image/png"})]}),Object(g.jsx)(r.a,{w:300,onClick:()=>{var e=document.createElement("input");e.type="file",e.accept="image/*",e.style.display="none",document.body.appendChild(e),e.addEventListener("input",(function(t){ne(t),document.body.removeChild(e)})),e.click()},children:"Select file from Device"}),I&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(d.c,{children:[Object(g.jsx)(r.a,{w:300,onClick:async()=>{if(I){const e=await(null===B||void 0===B?void 0:B.utils.getPrice(o,I.length));F(null===e||void 0===e?void 0:e.toString())}},children:"Get Price"}),_&&Object(g.jsx)(d.d,{children:"Cost: ".concat(B.utils.unitConverter(_).toString()," ").concat(B.currencyConfig.ticker.toLowerCase()," ")})]}),Object(g.jsx)(r.a,{w:300,onClick:async()=>{I&&await(null===B||void 0===B?void 0:B.uploader.upload(I,[{name:"Content-Type",value:G}]).then((e=>{z({status:200===(null===e||void 0===e?void 0:e.status)||201===(null===e||void 0===e?void 0:e.status)?"success":"error",title:200===(null===e||void 0===e?void 0:e.status)||201===(null===e||void 0===e?void 0:e.status)?"Successful!":"Unsuccessful! ".concat(null===e||void 0===e?void 0:e.status),description:null!==e&&void 0!==e&&e.data.id?"https://arweave.net/".concat(e.data.id):void 0,duration:15e3}),window.lastTxId=e.data.id,K(e.data.id),console.log("uploaded tx id is "+window.lastTxId)})).catch((e=>{z({status:"error",title:"Failed to upload - ".concat(e)})})))},children:"Upload File to Bundlr Network"})]}),Object(g.jsx)(d.b,{w:1e3}),Object(g.jsx)(d.d,{fontSize:"xl",children:Object(g.jsx)("b",{children:"Choice 0x02.Upload Code or Any Other Txt"})}),Object(g.jsx)(d.c,{children:Object(g.jsx)(b.a,{onChange:e=>{X(e.target.value)},style:{minHeight:"300px",marginTop:"5px",width:"500px"}})}),Object(g.jsxs)(d.c,{children:[Object(g.jsx)(d.d,{children:'Type(default is "application/elixir"):'}),Object(g.jsx)(h.a,{onChange:e=>H(e.target.value),placeholder:"application/elixir"})]}),Object(g.jsxs)(d.c,{w:1e3,style:{display:"flex",justifyContent:"center"},children:[Object(g.jsx)(r.a,{w:300,onClick:async()=>{if(Q){const t=await(null===B||void 0===B?void 0:B.utils.getPrice(o,e.from(Q,"utf8").length));Z(null===t||void 0===t?void 0:t.toString())}},children:"Get Price"}),Y&&Object(g.jsx)(d.d,{children:"Cost: ".concat(B.utils.unitConverter(Y).toString()," ").concat(B.currencyConfig.ticker.toLowerCase()," ")})]}),Object(g.jsx)(r.a,{w:300,onClick:async()=>{Q&&await(null===B||void 0===B?void 0:B.uploader.upload(e.from(Q,"utf8"),[{name:"Content-Type",value:q}]).then((e=>{z({status:200===(null===e||void 0===e?void 0:e.status)||201===(null===e||void 0===e?void 0:e.status)?"success":"error",title:200===(null===e||void 0===e?void 0:e.status)||201===(null===e||void 0===e?void 0:e.status)?"Successful!":"Unsuccessful! ".concat(null===e||void 0===e?void 0:e.status),description:null!==e&&void 0!==e&&e.data.id?"https://arweave.net/".concat(e.data.id):void 0,duration:15e3}),window.lastTxId=e.data.id,K(e.data.id),console.log("uploaded tx id is "+window.lastTxId)})).catch((e=>{z({status:"error",title:"Failed to upload - ".concat(e)})})))},children:"Upload Text to Bundlr Network"}),Object(g.jsx)(d.d,{fontSize:"lg",children:"Result Json:"}),Object(g.jsxs)(d.a,{w:300,children:["{ ",Object(g.jsx)("br",{}),'\xa0\xa0\xa0\xa0"tx_id": "',window.lastTxId,'", ',Object(g.jsx)("br",{}),'\xa0\xa0\xa0\xa0"resource_link": "https://arweave.net/',window.lastTxId,'", ',Object(g.jsx)("br",{}),'\xa0\xa0\xa0\xa0"uploader": "',O,'", ',Object(g.jsx)("br",{}),'\xa0\xa0\xa0\xa0"copy_from": "bundlr"',Object(g.jsx)("br",{}),"}"]}),Object(g.jsx)(d.d,{fontSize:"lg",children:"Signature:"}),Object(g.jsx)(d.d,{children:$}),Object(g.jsx)(w.CopyToClipboard,{text:'{ "uploader": "'.concat(O,'", "tx_hash": "').concat(V,'", "resource_link": "https://arweave.net/').concat(V,'", "copy_from": "bundlr" }'),children:Object(g.jsx)(r.a,{width:"300px",children:"Copy full JSON"})}),Object(g.jsx)(w.CopyToClipboard,{text:"https://arweave.net/".concat(V),children:Object(g.jsx)(r.a,{width:"300px",children:"Copy resource link only"})}),Object(g.jsx)(r.a,{w:300,onClick:async()=>{if(E){var e='{ "uploader": "'.concat(O,'", "tx_hash": "').concat(V,'", "resource_link": "https://arweave.net/').concat(V,'", "copy_from": "bundlr" }');ee(await E.send("personal_sign",[e,O])),console.log($)}},children:"generate signature"}),Object(g.jsx)(w.CopyToClipboard,{text:'\n            {\n              "payload":\n                { "uploader": "'.concat(O,'", "tx_hash": "').concat(V,'", "resource_link": "https://arweave.net/').concat(V,'", "copy_from": "bundlr" },\n              "signature":\n                "').concat($,'"\n            }\n\n            '),children:Object(g.jsx)(r.a,{width:"300px",children:"Copy JSON with signature to Clipboard"})})]})]})}}).call(this,n(9).Buffer)},454:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(80),o=n.n(i),s=n(435),r=n(265),l=n(82),d=n(10);o.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(r.a,{theme:l.c,children:Object(d.jsx)(s.a,{})})}),document.getElementById("root"))},540:function(e,t){},542:function(e,t){},553:function(e,t){},555:function(e,t){},581:function(e,t){},583:function(e,t){},584:function(e,t){},589:function(e,t){},591:function(e,t){},610:function(e,t){},622:function(e,t){},625:function(e,t){},660:function(e,t){},661:function(e,t){},701:function(e,t){},748:function(e,t){},781:function(e,t){},783:function(e,t){},803:function(e,t){},874:function(e,t){}},[[454,1,2]]]);
//# sourceMappingURL=main.08d5c648.chunk.js.map